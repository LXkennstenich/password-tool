
$(document).ready(function(){$("#createNewDatasetButton").fancybox();$("#newUserLink").fancybox();$(".container").hide();$("#navbar-trigger").bind("click touch",function(){if($(this).hasClass("open")===false){$(this).addClass("open");$(this).next(".container").slideDown("slow")}else{$(this).removeClass("open");$(this).next(".container").slideUp("slow")}});$("#clearCacheButton").bind("click touch",function(){var a={};a.action="ClearCache";a.timestamp=requestTimestamp;a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.host=host;a.userAgent=userAgent;a.uid=uid;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)!=1){alert("Cache konnte nicht geleert werden!")}},error:function(c,b){$(".ajax-message .text").addClass("error");displayNotice(c+b)}})});$("#createDatasetButton").bind("click touch",function(){var a={};a.action="NewDataset";a.timestamp=requestTimestamp;a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.host=host;a.userAgent=userAgent;a.uid=uid;a.title=document.getElementById("datasetTitle").value;a.login=document.getElementById("datasetLogin").value;a.password=document.getElementById("datasetPassword").value;a.url=document.getElementById("datasetURL").value;a.project=document.getElementById("datasetProject").value!=""?document.getElementById("datasetProject").value:document.getElementById("project-select").value;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/account"}else{}},error:function(c,b){$(".ajax-message .text").addClass("error");displayNotice(c+b)}})});$(".project-list-link").bind("click touch",function(){$(this).submit()});$("#updateSystemSettingsButton").bind("click touch",function(){var a={};a.action="UpdateSystemSettings";a.timestamp=requestTimestamp;a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.host=host;a.userAgent=userAgent;a.uid=uid;a.cronActive=document.getElementById("cronActive").checked!==false?1:0;a.clearSessionData=document.getElementById("cronClearSessionData").checked!==false?1:0;a.recrypt=document.getElementById("cronRecrypt").checked!==false?1:0;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/settings"}else{}},error:function(c,b){$(".ajax-message .text").addClass("error");displayNotice(c+b)}})});$("#generatePasswordButton").bind("click touch",function(){var a={};a.action="GeneratePassword";a.timestamp=requestTimestamp;a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.host=host;a.userAgent=userAgent;a.uid=uid;a.length=document.getElementById("passwordLengthBox").value;a.lowerCharacters=document.getElementById("lowerCharacters").checked!==false?1:0;a.highCharacters=document.getElementById("highCharacters").checked!==false?1:0;a.numbers=document.getElementById("numbers").checked!==false?1:0;a.specialChars=document.getElementById("specialchars").checked!==false?1:0;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){$("#datasetPassword").val(b);$("#datasetPassword").text(b)},error:function(c,b){}})});$("#validate-auth-setup-button").bind("click touch",function(){var a={};a.action="AuthSetup";a.timestamp=requestTimestamp;a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.host=host;a.userAgent=userAgent;a.uid=uid;a.validate=1;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/authenticator"}},error:function(c,b){}})});$("#authenticator-button").bind("click touch",function(){var a={};a.action="ValidateAuth";a.timestamp=requestTimestamp;a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.host=host;a.userAgent=userAgent;a.uid=uid;a.code=document.getElementById("authenticator-code").value;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/account"}else{$(".ajax-message").text(b)}},error:function(c,b){}})});$("#update-password-button").bind("click touch",function(){var a={};a.action="UpdatePassword";a.timestamp=requestTimestamp;a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.host=host;a.userAgent=userAgent;a.uid=uid;a.username=document.getElementById("username-input").value;a.oldPassword=document.getElementById("password-input-old").value;a.newPassword=document.getElementById("password-input-new").value;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/account"}else{$(".ajax-message").text("Benutzername oder Passwort sind nicht korrekt")}},error:function(c,b){}})});$("#input-search").keypress(function(a){if(a.which==13){$("#input-search").submit();return false}});$("#newUserButton").bind("click touch",function(){var a={};a.action="NewUser";a.timestamp=requestTimestamp;a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.host=host;a.userAgent=userAgent;a.uid=uid;a.username=document.getElementById("newUsername").value;a.accessLevel=document.getElementById("newAccessLevel").value;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/account"}else{$(".ajax-message").text(b)}}})})});function showPassword(a){if($(a).hasClass("show-password")){$(a).removeClass("show-password");$(a).removeClass("fa-eye-slash");var d=$(a).siblings("p");var b=d.text();var c=b.length;var f="";for(i=0;i<=c;i++){f+="*"}d.text(f)}else{var e={};e.action="DecryptPassword";e.timestamp=requestTimestamp;e.tk=token;e.ts=timestamp;e.ipaddress=ipaddress;e.host=host;e.userAgent=userAgent;e.uid=uid;e.id=$(a).parent(".row").parent(".content").parent(".dataset").children(".datasetID").val();$.ajax({type:"POST",data:{request:JSON.stringify(e)},url:getAjaxUrl(),success:function(g){$(a).addClass("show-password");$(a).addClass("fa-eye-slash");$(a).siblings("p").text(g)},error:function(h,g){$(a).siblings("p").text(h+g)}})}}function updatePasswordBox(a){$("#passwordLengthBox").val(a)}function updateRange(a){$("#datasetPasswordLength").val(a)};