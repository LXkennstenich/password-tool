
$(document).ready(function(){$("#createNewDatasetButton").fancybox();$("#createDatasetButton").bind("click touch",function(){var a={};a.action="NewDataset";a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.uid=uid;a.title=document.getElementById("datasetTitle").value;a.login=document.getElementById("datasetLogin").value;a.password=document.getElementById("datasetPassword").value;a.url=document.getElementById("datasetURL").value;a.project=document.getElementById("datasetProject").value;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/account"}else{}},error:function(c,b){$(".ajax-message .text").addClass("error");displayNotice(c+b)}})});$("#generatePasswordButton").bind("click touch",function(){var a={};a.action="GeneratePassword";a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.uid=uid;a.length=document.getElementById("passwordLengthBox").value;a.lowerCharacters=document.getElementById("lowerCharacters").checked!==false?1:0;a.highCharacters=document.getElementById("highCharacters").checked!==false?1:0;a.numbers=document.getElementById("numbers").checked!==false?1:0;a.specialChars=document.getElementById("specialchars").checked!==false?1:0;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){$("#datasetPassword").val(b);$("#datasetPassword").text(b)},error:function(c,b){}})});$("#validate-auth-setup-button").bind("click touch",function(){var a={};a.action="AuthSetup";a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.uid=uid;a.validate=1;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/authenticator"}},error:function(c,b){}})});$("#authenticator-button").bind("click touch",function(){var a={};a.action="ValidateAuth";a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.uid=uid;a.code=document.getElementById("authenticator-code").value;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/account"}else{$(".ajax-message").text("Authenticator Code ist nicht g√ºltig!")}},error:function(c,b){}})});$("#update-password-button").bind("click touch",function(){var a={};a.action="UpdatePassword";a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.uid=uid;a.username=document.getElementById("username-input").value;a.oldPassword=document.getElementById("password-input-old").value;a.newPassword=document.getElementById("password-input-new").value;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(b){if(parseInt(b)==1){window.location.href="/account"}else{$(".ajax-message").text("Benutzername oder Passwort sind nicht korrekt")}},error:function(c,b){}})})});function copy(b){var a={};a.action="DecryptPassword";a.file="dataset";a.tk=token;a.ts=timestamp;a.ipaddress=ipaddress;a.uid=uid;a.searchTerm="";a.encrypted=b;$.ajax({type:"POST",data:{request:JSON.stringify(a)},url:getAjaxUrl(),success:function(e){var f=$("<input>");$("body").append(f);var d=e;var c=$('<input id="realPass" value="'+d+'">');$("body").append(c);f.val(document.getElementById("realPass").value).select();document.execCommand("copy");f.remove()},error:function(d,c){$(selector).siblings("p").text(d+c)}})}function showPassword(a){if($(a).hasClass("show-password")){var c=$(a).parent(".row").parent(".content").siblings(".datasetHidden").val();$(a).removeClass("show-password");$(a).siblings("p").text(c)}else{var b={};b.action="DecryptPassword";b.file="dataset";b.tk=token;b.ts=timestamp;b.ipaddress=ipaddress;b.uid=uid;b.searchTerm="";b.encrypted=$(a).parent(".row").parent(".content").next(".datasetEncrypted").val();var c=$.ajax({type:"POST",data:{request:JSON.stringify(b)},url:getAjaxUrl(),success:function(d){$(a).addClass("show-password");$(a).siblings("p").text(d)},error:function(e,d){$(a).siblings("p").text(e+d)}})}}function updatePasswordBox(a){$("#passwordLengthBox").val(a)}function updateRange(a){$("#datasetPasswordLength").val(a)};